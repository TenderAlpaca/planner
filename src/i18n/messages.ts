export const messages = {
  en: {
    meta: {
      title: 'Weekend Escape - 95+ Places in Southern Hungary',
      description: 'Plan day trips and weekend getaways across Southern Hungary with curated places and ready-made combos.',
    },
    app: {
      title: 'Weekend Escape',
      subtitle: '{{places}} places ‚Ä¢ {{combos}} ready-made plans ‚Ä¢ Day trips to weekend getaways',
    },
    theme: {
      title: 'Theme',
      system: 'System',
      dark: 'Dark',
      light: 'Light',
    },
    filters: {
      mood: 'MOOD',
      distance: 'DISTANCE',
      duration: 'DURATION',
      tripType: 'TRIP TYPE',
      clear: 'clear',
      clearAll: 'Clear all',
      edit: 'Edit filters',
      hide: 'Hide filters',
      activeSummary: '{{count}} active',
      noneSummary: 'No filters active',
      selected: 'Selected filters',
    },
    actions: {
      surpriseMe: 'SURPRISE ME',
      viewOnMaps: 'üìç View on Maps',
      save: 'Save',
      close: 'Close',
      cancel: 'Cancel',
      useMyLocation: 'Use My Location',
    },
    labels: {
      todaysPick: "TODAY'S PICK ‚ú®",
      favouritesOnly: 'Favourites only',
      places: 'Places',
      plans: 'Plans',
      settings: 'Settings',
      language: 'Language',
      noPlacesMatch: 'No places match. Try different filters.',
      noPlansMatch: 'No plans match. Try different filters.',
      loading: 'Loading...',
      calculating: '‚è≥ Calculating...',
      distanceUnavailable: 'Distance unavailable',
      locationSettings: 'üìç Location Settings',
      locationMissing: 'Location is not set. Add one to see distances and filters based on travel time.',
      yourLocation: 'Your Location',
      locationPlaceholder: 'Enter address, city, or place',
      or: 'or',
      accentColor: 'Accent color',
    },
    colors: {
      blue: 'Blue',
      teal: 'Teal',
      green: 'Green',
      amber: 'Amber',
      rose: 'Rose',
    },
    tripType: {
      weekend: 'üåô Weekend',
      day: '‚òÄÔ∏è Day Trip',
    },
    favourites: {
      add: 'Add to favourites',
      remove: 'Remove from favourites',
      favourite: 'Favourite',
      unfavourite: 'Unfavourite',
    },
    errors: {
      mapsNotLoaded: 'Google Maps not loaded yet',
      locationRequired: 'Please enter a location.',
      locationNotFound: 'Location not found. Please try again.',
      locationFailed: 'Could not get your location.',
      geolocationNotSupported: 'Geolocation not supported',
      mapsApiMissing: 'Google Maps API key not configured',
      mapsLoadFailed: 'Failed to load Google Maps',
      invalidUserLocation: 'User location is not set or invalid. Please set your location.',
      invalidDestination: 'One or more places have invalid coordinates.',
      unknown: 'Something went wrong. Please try again.',
    },
    location: {
      currentLocation: 'Current Location',
      settingsTitle: 'Location Settings',
    },
  },
  hu: {
    meta: {
      title: 'Weekend Escape - 95+ hely D√©l-Magyarorsz√°gon',
      description: 'Egynapos kirandulasok es hetvegi kikapcsolodasok Del-Magyarorszagon, valtogathato helyekkel es programcsomagokkal.',
    },
    app: {
      title: 'Weekend Escape',
      subtitle: '{{places}} hely ‚Ä¢ {{combos}} k√©sz programterv ‚Ä¢ Egynapos kir√°ndul√°sokt√≥l a h√©tv√©gi kikapcsol√≥d√°sig',
    },
    theme: {
      title: 'T√©ma',
      system: 'Rendszer',
      dark: 'S√∂t√©t',
      light: 'Vil√°gos',
    },
    filters: {
      mood: 'HANGULAT',
      distance: 'T√ÅVOLS√ÅG',
      duration: 'ID≈êTARTAM',
      tripType: 'KIR√ÅNDUL√ÅS T√çPUSA',
      clear: 't√∂rl√©s',
      clearAll: '√ñsszes t√∂rl√©se',
      edit: 'Sz≈±r≈ëk szerkeszt√©se',
      hide: 'Sz≈±r≈ëk elrejt√©se',
      activeSummary: '{{count}} akt√≠v',
      noneSummary: 'Nincs akt√≠v sz≈±r≈ë',
      selected: 'Akt√≠v sz≈±r≈ëk',
    },
    actions: {
      surpriseMe: 'LEPJ MEG',
      viewOnMaps: 'üìç Megnyit√°s a t√©rk√©pen',
      save: 'Ment√©s',
      close: 'Bez√°r√°s',
      cancel: 'M√©gse',
      useMyLocation: 'Saj√°t helyzet haszn√°lata',
    },
    labels: {
      todaysPick: 'MAI AJ√ÅNLAT ‚ú®',
      favouritesOnly: 'Csak kedvencek',
      places: 'Helyek',
      plans: 'Tervek',
      settings: 'Be√°ll√≠t√°sok',
      language: 'Nyelv',
      noPlacesMatch: 'Nincs tal√°lat. Pr√≥b√°lj m√°s sz≈±r≈ëket.',
      noPlansMatch: 'Nincs tal√°lat. Pr√≥b√°lj m√°s sz≈±r≈ëket.',
      loading: 'Bet√∂lt√©s...',
      calculating: '‚è≥ Sz√°m√≠t√°s...',
      distanceUnavailable: 'T√°vols√°g nem el√©rhet≈ë',
      locationSettings: 'üìç Helybe√°ll√≠t√°sok',
      locationMissing: 'Nincs be√°ll√≠tott hely. Adj meg egyet, hogy l√°sd a t√°vols√°gokat √©s a sz≈±r≈ëket utaz√°si id≈ë alapj√°n.',
      yourLocation: 'Tart√≥zkod√°si helyed',
      locationPlaceholder: 'Adj meg c√≠met, v√°rost vagy helyet',
      or: 'vagy',
      accentColor: 'Kiemelo szin',
    },
    colors: {
      blue: 'Kek',
      teal: 'Turkiz',
      green: 'Zold',
      amber: 'Borostyan',
      rose: 'Rozsa',
    },
    tripType: {
      weekend: 'üåô H√©tv√©ge',
      day: '‚òÄÔ∏è Egynapos',
    },
    favourites: {
      add: 'Hozz√°ad√°s a kedvencekhez',
      remove: 'Elt√°vol√≠t√°s a kedvencek k√∂z√ºl',
      favourite: 'Kedvenc',
      unfavourite: 'Nem kedvenc',
    },
    errors: {
      mapsNotLoaded: 'A Google T√©rk√©p m√©g nem t√∂lt√∂tt be',
      locationRequired: 'Adj meg egy helyet.',
      locationNotFound: 'A hely nem tal√°lhat√≥. Pr√≥b√°ld √∫jra.',
      locationFailed: 'Nem siker√ºlt lek√©rni a helyzetedet.',
      geolocationNotSupported: 'A geolok√°ci√≥ nem t√°mogatott',
      mapsApiMissing: 'A Google Maps API kulcs nincs be√°ll√≠tva',
      mapsLoadFailed: 'A Google T√©rk√©p bet√∂lt√©se sikertelen',
      invalidUserLocation: 'A felhaszn√°l√≥i helyzet hi√°nyzik vagy hib√°s. √Åll√≠tsd be a helyzetedet.',
      invalidDestination: 'Egy vagy t√∂bb hely koordin√°t√°ja √©rv√©nytelen.',
      unknown: 'Hiba t√∂rt√©nt. Pr√≥b√°ld √∫jra.',
    },
    location: {
      currentLocation: 'Jelenlegi helyzet',
      settingsTitle: 'Helybe√°ll√≠t√°sok',
    },
  },
};

export function translateMessage(language: 'en' | 'hu', key: string, params: Record<string, string | number> = {}): string {
  const activeLanguage = messages[language] ? language : 'en';
  const fallback = messages.en;
  const segments = key.split('.');

  const value = segments.reduce((acc, segment) => acc?.[segment], messages[activeLanguage])
    ?? segments.reduce((acc, segment) => acc?.[segment], fallback)
    ?? key;

  if (typeof value !== 'string') {
    return key;
  }

  return value.replace(/{{(\w+)}}/g, (_, paramKey) => {
    const paramValue = params[paramKey];
    return paramValue === undefined || paramValue === null ? '' : String(paramValue);
  });
}

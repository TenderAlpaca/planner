export const messages = {
  en: {
    meta: {
      title: 'Weekend Escape - 95+ Places in Southern Hungary',
    },
    app: {
      title: 'Weekend Escape',
      subtitle: '{{places}} places â€¢ {{combos}} ready-made plans â€¢ Day trips to weekend getaways',
    },
    filters: {
      mood: 'MOOD',
      distance: 'DISTANCE',
      duration: 'DURATION',
      tripType: 'TRIP TYPE',
      clear: 'clear',
      clearAll: 'Clear all',
      edit: 'Edit filters',
      hide: 'Hide filters',
      activeSummary: '{{count}} active',
      noneSummary: 'No filters active',
      selected: 'Selected filters',
    },
    actions: {
      surpriseMe: 'SURPRISE ME',
      viewOnMaps: 'ðŸ“ View on Maps',
      save: 'Save',
      cancel: 'Cancel',
      useMyLocation: 'Use My Location',
    },
    labels: {
      todaysPick: "TODAY'S PICK âœ¨",
      favouritesOnly: 'Favourites only',
      places: 'Places',
      plans: 'Plans',
      noPlacesMatch: 'No places match. Try different filters.',
      noPlansMatch: 'No plans match. Try different filters.',
      loading: 'Loading...',
      calculating: 'â³ Calculating...',
      distanceUnavailable: 'Distance unavailable',
      locationSettings: 'ðŸ“ Location Settings',
      yourLocation: 'Your Location',
      locationPlaceholder: 'Enter address, city, or place',
      or: 'or',
    },
    tripType: {
      weekend: 'ðŸŒ™ Weekend',
      day: 'â˜€ï¸ Day Trip',
    },
    favourites: {
      add: 'Add to favourites',
      remove: 'Remove from favourites',
      favourite: 'Favourite',
      unfavourite: 'Unfavourite',
    },
    errors: {
      mapsNotLoaded: 'Google Maps not loaded yet',
      locationRequired: 'Please enter a location.',
      locationNotFound: 'Location not found. Please try again.',
      locationFailed: 'Could not get your location.',
      geolocationNotSupported: 'Geolocation not supported',
      mapsApiMissing: 'Google Maps API key not configured',
      mapsLoadFailed: 'Failed to load Google Maps',
      invalidUserLocation: 'User location is not set or invalid. Please set your location.',
      invalidDestination: 'One or more places have invalid coordinates.',
      unknown: 'Something went wrong. Please try again.',
    },
    location: {
      currentLocation: 'Current Location',
      settingsTitle: 'Location Settings',
    },
  },
  hu: {
    meta: {
      title: 'Weekend Escape - 95+ hely DÃ©l-MagyarorszÃ¡gon',
    },
    app: {
      title: 'Weekend Escape',
      subtitle: '{{places}} hely â€¢ {{combos}} kÃ©sz programterv â€¢ Egynapos kirÃ¡ndulÃ¡soktÃ³l a hÃ©tvÃ©gi kikapcsolÃ³dÃ¡sig',
    },
    filters: {
      mood: 'HANGULAT',
      distance: 'TÃVOLSÃG',
      duration: 'IDÅTARTAM',
      tripType: 'KIRÃNDULÃS TÃPUSA',
      clear: 'tÃ¶rlÃ©s',
      clearAll: 'Ã–sszes tÃ¶rlÃ©se',
      edit: 'SzÅ±rÅ‘k szerkesztÃ©se',
      hide: 'SzÅ±rÅ‘k elrejtÃ©se',
      activeSummary: '{{count}} aktÃ­v',
      noneSummary: 'Nincs aktÃ­v szÅ±rÅ‘',
      selected: 'AktÃ­v szÅ±rÅ‘k',
    },
    actions: {
      surpriseMe: 'LEPJ MEG',
      viewOnMaps: 'ðŸ“ MegnyitÃ¡s a tÃ©rkÃ©pen',
      save: 'MentÃ©s',
      cancel: 'MÃ©gse',
      useMyLocation: 'SajÃ¡t helyzet hasznÃ¡lata',
    },
    labels: {
      todaysPick: 'MAI AJÃNLAT âœ¨',
      favouritesOnly: 'Csak kedvencek',
      places: 'Helyek',
      plans: 'Tervek',
      noPlacesMatch: 'Nincs talÃ¡lat. PrÃ³bÃ¡lj mÃ¡s szÅ±rÅ‘ket.',
      noPlansMatch: 'Nincs talÃ¡lat. PrÃ³bÃ¡lj mÃ¡s szÅ±rÅ‘ket.',
      loading: 'BetÃ¶ltÃ©s...',
      calculating: 'â³ SzÃ¡mÃ­tÃ¡s...',
      distanceUnavailable: 'TÃ¡volsÃ¡g nem elÃ©rhetÅ‘',
      locationSettings: 'ðŸ“ HelybeÃ¡llÃ­tÃ¡sok',
      yourLocation: 'TartÃ³zkodÃ¡si helyed',
      locationPlaceholder: 'Adj meg cÃ­met, vÃ¡rost vagy helyet',
      or: 'vagy',
    },
    tripType: {
      weekend: 'ðŸŒ™ HÃ©tvÃ©ge',
      day: 'â˜€ï¸ Egynapos',
    },
    favourites: {
      add: 'HozzÃ¡adÃ¡s a kedvencekhez',
      remove: 'EltÃ¡volÃ­tÃ¡s a kedvencek kÃ¶zÃ¼l',
      favourite: 'Kedvenc',
      unfavourite: 'Nem kedvenc',
    },
    errors: {
      mapsNotLoaded: 'A Google TÃ©rkÃ©p mÃ©g nem tÃ¶ltÃ¶tt be',
      locationRequired: 'Adj meg egy helyet.',
      locationNotFound: 'A hely nem talÃ¡lhatÃ³. PrÃ³bÃ¡ld Ãºjra.',
      locationFailed: 'Nem sikerÃ¼lt lekÃ©rni a helyzetedet.',
      geolocationNotSupported: 'A geolokÃ¡ciÃ³ nem tÃ¡mogatott',
      mapsApiMissing: 'A Google Maps API kulcs nincs beÃ¡llÃ­tva',
      mapsLoadFailed: 'A Google TÃ©rkÃ©p betÃ¶ltÃ©se sikertelen',
      invalidUserLocation: 'A felhasznÃ¡lÃ³i helyzet hiÃ¡nyzik vagy hibÃ¡s. ÃllÃ­tsd be a helyzetedet.',
      invalidDestination: 'Egy vagy tÃ¶bb hely koordinÃ¡tÃ¡ja Ã©rvÃ©nytelen.',
      unknown: 'Hiba tÃ¶rtÃ©nt. PrÃ³bÃ¡ld Ãºjra.',
    },
    location: {
      currentLocation: 'Jelenlegi helyzet',
      settingsTitle: 'HelybeÃ¡llÃ­tÃ¡sok',
    },
  },
};

export function translateMessage(language, key, params = {}) {
  const activeLanguage = messages[language] ? language : 'en';
  const fallback = messages.en;
  const segments = key.split('.');

  const value = segments.reduce((acc, segment) => acc?.[segment], messages[activeLanguage])
    ?? segments.reduce((acc, segment) => acc?.[segment], fallback)
    ?? key;

  if (typeof value !== 'string') {
    return key;
  }

  return value.replace(/{{(\w+)}}/g, (_, paramKey) => {
    const paramValue = params[paramKey];
    return paramValue === undefined || paramValue === null ? '' : String(paramValue);
  });
}
